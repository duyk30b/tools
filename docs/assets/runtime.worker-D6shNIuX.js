var p=Object.defineProperty;var y=(r,n,o)=>n in r?p(r,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[n]=o;var f=(r,n,o)=>y(r,typeof n!="symbol"?n+"":n,o);(function(){"use strict";class r{}f(r,"sleep",async e=>await new Promise(s=>setTimeout(()=>{s(e)},e))),f(r,"runTimeout",(e,s)=>{const t=new Promise((u,i)=>setTimeout(()=>i(new Error(`Timeout: ${s}ms`)),s));return Promise.race([e,t])}),f(r,"debounce",(e,s)=>{let t;return(...u)=>{t&&clearTimeout(t),t=setTimeout(()=>{e(...u),t=null},s)}}),f(r,"throttle",(e,s)=>{let t=0;return function(...u){const i=new Date().getTime();if(i-t>=s)return t=i,e(...u)}});class n{static stringify(e){if(typeof e=="number"||typeof e=="boolean"||typeof e>"u")return e;if(typeof e=="string")return`"${e}"`;if(typeof e=="function")return e.toString();if(typeof e=="object"){if(e==null)return e;if(e.name==="Error")return`Error: ${e.message}`;try{return JSON.stringify(e,null,2)}catch{return"[Circular]"}}return e.toString()}}self.onmessage=async o=>{const{codeJs:e,varNameList:s,executionId:t}=o.data,u=o.data.TIMEOUT_MS||1e4;try{const i={log:(...c)=>{console.log(...c),self.postMessage({type:"Log",data:c.map(l=>n.stringify(l)).join(" "),executionId:t})}},a=new Function("console",` ${e}
        return { ${s.join(",")} };
      `),m=await r.runTimeout(a(i),u);self.postMessage({type:"Variables",data:Object.keys(m).map(c=>{let l=typeof m[c];return l==="object"&&(l=Object.prototype.toString.call(m[c])),{name:c,value:n.stringify(m[c]),type:l}}),executionId:t})}catch(i){console.warn("[WORKER ERROR]:",i),self.postMessage({type:"ERROR",data:` ERROR: ${i.message}`,executionId:t})}}})();
