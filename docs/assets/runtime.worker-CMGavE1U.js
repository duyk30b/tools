var y=Object.defineProperty;var a=(r,t,s)=>t in r?y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var l=(r,t,s)=>a(r,typeof t!="symbol"?t+"":t,s);(function(){"use strict";class r{}l(r,"sleep",async e=>await new Promise(o=>setTimeout(()=>{o(e)},e))),l(r,"runTimeout",(e,o)=>{const c=new Promise((m,i)=>setTimeout(()=>i(new Error(`Timeout: ${o}ms`)),o));return Promise.race([e,c])});class t{static stringify(e){if(typeof e=="number"||typeof e=="boolean"||typeof e>"u")return e;if(typeof e=="string")return`"${e}"`;if(typeof e=="function")return e.toString();if(typeof e=="object"){if(e==null)return e;if(e.name==="Error")return`Error: ${e.message}`;try{return JSON.stringify(e,null,2)}catch{return"[Circular]"}}return e.toString()}}self.onmessage=async s=>{const{codeJs:e,varNameList:o,executionId:c}=s.data,m=s.data.TIMEOUT_MS||1e4;try{const i={log:(...n)=>{console.log(...n),self.postMessage({type:"Log",data:n.map(u=>t.stringify(u)).join(" "),executionId:c})}},p=new Function("console",` ${e}
        return { ${o.join(",")} };
      `),f=await r.runTimeout(p(i),m);self.postMessage({type:"Variables",data:Object.keys(f).map(n=>{let u=typeof f[n];return u==="object"&&(u=Object.prototype.toString.call(f[n])),{name:n,value:t.stringify(f[n]),type:u}}),executionId:c})}catch(i){console.warn("[WORKER ERROR]:",i),self.postMessage({type:"ERROR",data:` ERROR: ${i.message}`,executionId:c})}}})();
